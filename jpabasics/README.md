# JPA
Java Persistent API

Owning side is the relationship which holds foreign key in the database.

## One to One
```
@OneToOne
Owning side is the side where foreign key is specified. Owner specified by @cascade
Fetch type: Eager

In case of bidirectional relationship by default both tables will hold foreign key.
Use mapped-by in child object to avoid keeping foreign key in child table

OWNER:
@Entity
public class Product {

@OneToOne(cascade = CascadeType.ALL)
private Note note;
}

CHILD:
@Entity
public class Note {

@OneToOne(mappedBy = "note")
private Product product;
}


```

## One to Many
```
@One to Many
'Many' side is the owning side.
Fetch type: Lazy

By default parent_childs table is created to store One to Many relation.
Use mapped_by in parent object to avoid creating this table.
Many side will have foreign key pointing to One side table primary key.

@Entity
public class Product {

@OneToMany(cascade = CascadeType.ALL, mappedBy = "product")
private Set<Material> materials;
}

@Entity
public class Material {

@ManyToOne
private Product product;
}

```

## Many to One
```
@ManyToOne
'Many' side is the owning side. 
Fetch type: Eager

Many side will have foreign key pointing to One side table primary key.

@Entity
public class Product {

@OneToMany(cascade = CascadeType.ALL, mappedBy = "product")
private Set<Material> materials;
}

@Entity
public class Material {

@ManyToOne
private Product product;
}
```

## Many to Many
```
@ManyToMany
Join table is required to store mapping.
'mappedBy' is used to define the field which owns the reference of the relationship.
Fetch type: Lazy

By default two tables are created to store relation
parent_childs
child_parents
We have to avoid child_parents table by providing mappedBy in child table.

Join table generated by default follows namging convention parent_childs.
It can be renamed by providing @JoinTable annotation in parent object.

@Entity
public class Product {

@ManyToMany
@JoinTable(name = "product_category", joinColumns = @JoinColumn(name = "product_id"),
            inverseJoinColumns = @JoinColumn(name = "category_id"))
private Set<Category> categories;
}
```

# Cascade Types
Defines how changes are cascaded from parent objects to child objects.
By default no cascade types are applied.

```
PERSIST : Save operations will cascade to related entities
MERGE : When parent entities are merged then child entities are also merged
REFRESH : When parent entities are refreshed then child entities are also refreshed
REMOVE : Child entities are removed along with parent entities
DETACH : Detach child when parent is detached from hibernate sesssion
ALL : All the above cascade types are applied
```

# Enumeration
```
@Enumerated(value = EnumType.STRING)
private Size size;
```